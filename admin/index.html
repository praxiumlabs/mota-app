<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>MOTA Admin Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <style>
    /* ═══════════════════════════════════════════════════════════════════
       MOTA ADMIN DASHBOARD - Professional UI
       ═══════════════════════════════════════════════════════════════════ */
    
    :root {
      /* Colors */
      --bg-primary: #0f1419;
      --bg-secondary: #1a1f2e;
      --bg-tertiary: #242b3d;
      --bg-hover: #2d3548;
      --bg-active: #363f54;
      
      --gold: #d4af37;
      --gold-light: #e8c547;
      --gold-dark: #b8952f;
      --gold-muted: rgba(212, 175, 55, 0.15);
      
      --text-primary: #f5f5f5;
      --text-secondary: #a0aec0;
      --text-muted: #718096;
      
      --border: #2d3748;
      --border-light: #4a5568;
      
      --success: #48bb78;
      --success-bg: rgba(72, 187, 120, 0.15);
      --warning: #ecc94b;
      --warning-bg: rgba(236, 201, 75, 0.15);
      --error: #fc8181;
      --error-bg: rgba(252, 129, 129, 0.15);
      --info: #63b3ed;
      --info-bg: rgba(99, 179, 237, 0.15);
      
      /* Investor Tiers */
      --tier-gold: #d4af37;
      --tier-platinum: #e5e4e2;
      --tier-diamond: #b9f2ff;
      
      /* Spacing */
      --sidebar-width: 260px;
      --header-height: 64px;
      --radius-sm: 6px;
      --radius-md: 10px;
      --radius-lg: 14px;
      --radius-xl: 20px;
      
      /* Shadows */
      --shadow-sm: 0 1px 2px rgba(0,0,0,0.3);
      --shadow-md: 0 4px 12px rgba(0,0,0,0.4);
      --shadow-lg: 0 8px 24px rgba(0,0,0,0.5);
      --shadow-glow: 0 0 20px rgba(212, 175, 55, 0.3);
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: var(--bg-primary);
      color: var(--text-primary);
      line-height: 1.6;
      overflow-x: hidden;
    }

    /* ═══════════════════════════════════════════════════════════════════
       LAYOUT
       ═══════════════════════════════════════════════════════════════════ */
    
    .app {
      display: flex;
      min-height: 100vh;
    }

    /* Sidebar */
    .sidebar {
      width: var(--sidebar-width);
      background: var(--bg-secondary);
      border-right: 1px solid var(--border);
      display: flex;
      flex-direction: column;
      position: fixed;
      top: 0;
      left: 0;
      bottom: 0;
      z-index: 100;
      transition: transform 0.3s ease;
    }

    .sidebar-header {
      padding: 24px;
      border-bottom: 1px solid var(--border);
    }

    .sidebar-logo {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .logo-icon {
      width: 42px;
      height: 42px;
      background: linear-gradient(135deg, var(--gold-light), var(--gold-dark));
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
      color: var(--bg-primary);
    }

    .logo-text {
      font-size: 22px;
      font-weight: 800;
      background: linear-gradient(135deg, var(--gold-light), var(--gold));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      letter-spacing: 1px;
    }

    .logo-sub {
      font-size: 11px;
      color: var(--text-muted);
      font-weight: 500;
      letter-spacing: 0.5px;
    }

    /* Navigation */
    .sidebar-nav {
      flex: 1;
      padding: 16px 12px;
      overflow-y: auto;
    }

    .nav-section {
      margin-bottom: 24px;
    }

    .nav-section-title {
      font-size: 10px;
      font-weight: 700;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 1.5px;
      padding: 0 12px;
      margin-bottom: 8px;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px 16px;
      border-radius: var(--radius-md);
      color: var(--text-secondary);
      cursor: pointer;
      transition: all 0.2s ease;
      margin-bottom: 2px;
      font-size: 14px;
      font-weight: 500;
    }

    .nav-item:hover {
      background: var(--bg-hover);
      color: var(--text-primary);
    }

    .nav-item.active {
      background: var(--gold-muted);
      color: var(--gold);
    }

    .nav-item i {
      width: 20px;
      text-align: center;
      font-size: 16px;
    }

    .nav-item .badge {
      margin-left: auto;
      background: var(--error);
      color: white;
      font-size: 10px;
      font-weight: 700;
      padding: 2px 8px;
      border-radius: 10px;
    }

    /* Sidebar Footer */
    .sidebar-footer {
      padding: 16px;
      border-top: 1px solid var(--border);
    }

    .user-info {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      background: var(--bg-tertiary);
      border-radius: var(--radius-md);
    }

    .user-avatar {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      background: linear-gradient(135deg, var(--gold-light), var(--gold-dark));
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 700;
      color: var(--bg-primary);
    }

    .user-details {
      flex: 1;
      min-width: 0;
    }

    .user-name {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .user-role {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Main Content */
    .main {
      flex: 1;
      margin-left: var(--sidebar-width);
      min-height: 100vh;
      display: flex;
      flex-direction: column;
    }

    /* Header */
    .header {
      height: var(--header-height);
      background: var(--bg-secondary);
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 0 24px;
      position: sticky;
      top: 0;
      z-index: 50;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .page-title {
      font-size: 20px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .breadcrumb {
      display: flex;
      align-items: center;
      gap: 8px;
      font-size: 13px;
      color: var(--text-muted);
    }

    .breadcrumb a {
      color: var(--text-secondary);
      text-decoration: none;
    }

    .breadcrumb a:hover {
      color: var(--gold);
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 12px;
    }

    .header-btn {
      width: 40px;
      height: 40px;
      border-radius: var(--radius-md);
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      color: var(--text-secondary);
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: all 0.2s ease;
      position: relative;
    }

    .header-btn:hover {
      background: var(--bg-hover);
      color: var(--text-primary);
    }

    .header-btn .notification-dot {
      position: absolute;
      top: 8px;
      right: 8px;
      width: 8px;
      height: 8px;
      background: var(--error);
      border-radius: 50%;
    }

    /* Search */
    .search-box {
      display: flex;
      align-items: center;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 0 16px;
      width: 300px;
    }

    .search-box i {
      color: var(--text-muted);
      margin-right: 12px;
    }

    .search-box input {
      flex: 1;
      background: none;
      border: none;
      outline: none;
      color: var(--text-primary);
      font-size: 14px;
      padding: 10px 0;
    }

    .search-box input::placeholder {
      color: var(--text-muted);
    }

    /* Content */
    .content {
      flex: 1;
      padding: 24px;
      background: var(--bg-primary);
    }

    /* ═══════════════════════════════════════════════════════════════════
       COMPONENTS
       ═══════════════════════════════════════════════════════════════════ */

    /* Cards */
    .card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      overflow: hidden;
    }

    .card-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .card-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .card-title i {
      color: var(--gold);
    }

    .card-body {
      padding: 24px;
    }

    .card-footer {
      padding: 16px 24px;
      border-top: 1px solid var(--border);
      background: var(--bg-tertiary);
    }

    /* Stats Grid */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }

    .stat-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 24px;
      display: flex;
      align-items: flex-start;
      gap: 16px;
      transition: all 0.3s ease;
    }

    .stat-card:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }

    .stat-icon {
      width: 52px;
      height: 52px;
      border-radius: var(--radius-md);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 22px;
    }

    .stat-icon.gold { background: var(--gold-muted); color: var(--gold); }
    .stat-icon.success { background: var(--success-bg); color: var(--success); }
    .stat-icon.info { background: var(--info-bg); color: var(--info); }
    .stat-icon.warning { background: var(--warning-bg); color: var(--warning); }
    .stat-icon.error { background: var(--error-bg); color: var(--error); }

    .stat-content {
      flex: 1;
    }

    .stat-label {
      font-size: 13px;
      color: var(--text-muted);
      font-weight: 500;
      margin-bottom: 4px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 800;
      color: var(--text-primary);
      line-height: 1.2;
    }

    .stat-change {
      display: inline-flex;
      align-items: center;
      gap: 4px;
      font-size: 12px;
      font-weight: 600;
      margin-top: 8px;
      padding: 4px 8px;
      border-radius: 6px;
    }

    .stat-change.up { background: var(--success-bg); color: var(--success); }
    .stat-change.down { background: var(--error-bg); color: var(--error); }

    /* Buttons */
    .btn {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 8px;
      padding: 10px 20px;
      border-radius: var(--radius-md);
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: all 0.2s ease;
      border: none;
      outline: none;
    }

    .btn-primary {
      background: linear-gradient(135deg, var(--gold-light), var(--gold-dark));
      color: var(--bg-primary);
    }

    .btn-primary:hover {
      box-shadow: var(--shadow-glow);
      transform: translateY(-1px);
    }

    .btn-secondary {
      background: var(--bg-tertiary);
      color: var(--text-primary);
      border: 1px solid var(--border);
    }

    .btn-secondary:hover {
      background: var(--bg-hover);
      border-color: var(--border-light);
    }

    .btn-danger {
      background: var(--error-bg);
      color: var(--error);
      border: 1px solid var(--error);
    }

    .btn-danger:hover {
      background: var(--error);
      color: white;
    }

    .btn-sm {
      padding: 6px 12px;
      font-size: 12px;
    }

    .btn-lg {
      padding: 14px 28px;
      font-size: 16px;
    }

    .btn-icon {
      width: 36px;
      height: 36px;
      padding: 0;
      border-radius: var(--radius-sm);
    }

    /* Tables */
    .table-container {
      overflow-x: auto;
    }

    table {
      width: 100%;
      border-collapse: collapse;
    }

    th, td {
      padding: 14px 16px;
      text-align: left;
      border-bottom: 1px solid var(--border);
    }

    th {
      font-size: 11px;
      font-weight: 700;
      color: var(--text-muted);
      text-transform: uppercase;
      letter-spacing: 0.5px;
      background: var(--bg-tertiary);
    }

    td {
      font-size: 14px;
      color: var(--text-primary);
    }

    tr:hover td {
      background: var(--bg-hover);
    }

    .table-img {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-sm);
      object-fit: cover;
    }

    .table-actions {
      display: flex;
      gap: 8px;
    }

    /* Badges */
    .badge {
      display: inline-flex;
      align-items: center;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 11px;
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
    }

    .badge-success { background: var(--success-bg); color: var(--success); }
    .badge-warning { background: var(--warning-bg); color: var(--warning); }
    .badge-error { background: var(--error-bg); color: var(--error); }
    .badge-info { background: var(--info-bg); color: var(--info); }
    .badge-gold { background: var(--gold-muted); color: var(--gold); }

    /* Forms */
    .form-group {
      margin-bottom: 20px;
    }

    .form-label {
      display: block;
      font-size: 13px;
      font-weight: 600;
      color: var(--text-secondary);
      margin-bottom: 8px;
    }

    .form-input, .form-select, .form-textarea {
      width: 100%;
      padding: 12px 16px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      color: var(--text-primary);
      font-size: 14px;
      transition: all 0.2s ease;
    }

    .form-input:focus, .form-select:focus, .form-textarea:focus {
      outline: none;
      border-color: var(--gold);
      box-shadow: 0 0 0 3px var(--gold-muted);
    }

    .form-textarea {
      min-height: 120px;
      resize: vertical;
    }

    .form-row {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 16px;
    }

    .form-hint {
      font-size: 12px;
      color: var(--text-muted);
      margin-top: 6px;
    }

    /* Toggle Switch */
    .toggle {
      position: relative;
      width: 48px;
      height: 26px;
      background: var(--bg-tertiary);
      border-radius: 13px;
      cursor: pointer;
      transition: all 0.3s ease;
      border: 1px solid var(--border);
    }

    .toggle::after {
      content: '';
      position: absolute;
      top: 3px;
      left: 3px;
      width: 18px;
      height: 18px;
      background: var(--text-muted);
      border-radius: 50%;
      transition: all 0.3s ease;
    }

    .toggle.active {
      background: var(--gold);
      border-color: var(--gold);
    }

    .toggle.active::after {
      left: 25px;
      background: white;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.7);
      backdrop-filter: blur(4px);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 1000;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
    }

    .modal-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .modal {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      width: 90%;
      max-width: 600px;
      max-height: 90vh;
      overflow: hidden;
      transform: scale(0.9) translateY(20px);
      transition: all 0.3s ease;
    }

    .modal-overlay.active .modal {
      transform: scale(1) translateY(0);
    }

    .modal-header {
      padding: 20px 24px;
      border-bottom: 1px solid var(--border);
      display: flex;
      align-items: center;
      justify-content: space-between;
    }

    .modal-title {
      font-size: 18px;
      font-weight: 700;
      color: var(--text-primary);
    }

    .modal-close {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      background: var(--bg-tertiary);
      border: none;
      color: var(--text-secondary);
      cursor: pointer;
      display: flex;
      align-items: center;
      justify-content: center;
      transition: all 0.2s ease;
    }

    .modal-close:hover {
      background: var(--error-bg);
      color: var(--error);
    }

    .modal-body {
      padding: 24px;
      max-height: 60vh;
      overflow-y: auto;
    }

    .modal-footer {
      padding: 16px 24px;
      border-top: 1px solid var(--border);
      display: flex;
      justify-content: flex-end;
      gap: 12px;
      background: var(--bg-tertiary);
    }

    /* Toast Notifications */
    .toast-container {
      position: fixed;
      top: 24px;
      right: 24px;
      z-index: 2000;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .toast {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-md);
      padding: 16px 20px;
      display: flex;
      align-items: center;
      gap: 12px;
      min-width: 320px;
      box-shadow: var(--shadow-lg);
      animation: slideIn 0.3s ease;
    }

    @keyframes slideIn {
      from { transform: translateX(100%); opacity: 0; }
      to { transform: translateX(0); opacity: 1; }
    }

    .toast-icon {
      width: 36px;
      height: 36px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .toast.success .toast-icon { background: var(--success-bg); color: var(--success); }
    .toast.error .toast-icon { background: var(--error-bg); color: var(--error); }
    .toast.warning .toast-icon { background: var(--warning-bg); color: var(--warning); }
    .toast.info .toast-icon { background: var(--info-bg); color: var(--info); }

    .toast-content {
      flex: 1;
    }

    .toast-title {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    .toast-message {
      font-size: 13px;
      color: var(--text-secondary);
    }

    /* Empty State */
    .empty-state {
      text-align: center;
      padding: 60px 24px;
    }

    .empty-state i {
      font-size: 64px;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .empty-state h3 {
      font-size: 18px;
      font-weight: 600;
      color: var(--text-primary);
      margin-bottom: 8px;
    }

    .empty-state p {
      color: var(--text-muted);
      margin-bottom: 24px;
    }

    /* Data Grid */
    .data-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
      gap: 20px;
    }

    .data-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      overflow: hidden;
      transition: all 0.3s ease;
    }

    .data-card:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-md);
      border-color: var(--gold-muted);
    }

    .data-card-img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      background: var(--bg-tertiary);
    }

    .data-card-body {
      padding: 16px;
    }

    .data-card-title {
      font-size: 16px;
      font-weight: 700;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .data-card-subtitle {
      font-size: 13px;
      color: var(--text-muted);
      margin-bottom: 12px;
    }

    .data-card-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
    }

    .data-card-price {
      font-size: 18px;
      font-weight: 700;
      color: var(--gold);
    }

    .data-card-rating {
      display: flex;
      align-items: center;
      gap: 4px;
      color: var(--warning);
      font-size: 13px;
    }

    .data-card-footer {
      padding: 12px 16px;
      border-top: 1px solid var(--border);
      display: flex;
      gap: 8px;
    }

    .data-card-footer .btn {
      flex: 1;
    }

    /* Filters */
    .filters {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
      flex-wrap: wrap;
    }

    .filter-btn {
      padding: 8px 16px;
      border-radius: 20px;
      background: var(--bg-tertiary);
      border: 1px solid var(--border);
      color: var(--text-secondary);
      font-size: 13px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s ease;
    }

    .filter-btn:hover, .filter-btn.active {
      background: var(--gold-muted);
      border-color: var(--gold);
      color: var(--gold);
    }

    /* Page Header */
    .page-header {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 24px;
    }

    .page-header-left h1 {
      font-size: 24px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .page-header-left p {
      color: var(--text-muted);
      font-size: 14px;
    }

    /* Tabs */
    .tabs {
      display: flex;
      border-bottom: 1px solid var(--border);
      margin-bottom: 24px;
    }

    .tab {
      padding: 12px 24px;
      font-size: 14px;
      font-weight: 600;
      color: var(--text-muted);
      cursor: pointer;
      border-bottom: 2px solid transparent;
      transition: all 0.2s ease;
    }

    .tab:hover {
      color: var(--text-primary);
    }

    .tab.active {
      color: var(--gold);
      border-bottom-color: var(--gold);
    }

    /* Login Page */
    .login-page {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, var(--bg-primary) 0%, var(--bg-secondary) 100%);
    }

    .login-card {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-xl);
      padding: 48px;
      width: 100%;
      max-width: 420px;
      box-shadow: var(--shadow-lg);
    }

    .login-logo {
      text-align: center;
      margin-bottom: 32px;
    }

    .login-logo-icon {
      width: 72px;
      height: 72px;
      background: linear-gradient(135deg, var(--gold-light), var(--gold-dark));
      border-radius: 20px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 32px;
      color: var(--bg-primary);
      margin: 0 auto 16px;
    }

    .login-title {
      font-size: 24px;
      font-weight: 800;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .login-subtitle {
      color: var(--text-muted);
      font-size: 14px;
    }

    /* Quick Actions */
    .quick-actions {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .quick-action {
      background: var(--bg-secondary);
      border: 1px solid var(--border);
      border-radius: var(--radius-lg);
      padding: 20px;
      display: flex;
      align-items: center;
      gap: 16px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .quick-action:hover {
      border-color: var(--gold);
      background: var(--gold-muted);
    }

    .quick-action-icon {
      width: 48px;
      height: 48px;
      border-radius: var(--radius-md);
      background: var(--gold-muted);
      color: var(--gold);
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .quick-action-text {
      font-size: 14px;
      font-weight: 600;
      color: var(--text-primary);
    }

    /* Activity Feed */
    .activity-list {
      display: flex;
      flex-direction: column;
    }

    .activity-item {
      display: flex;
      gap: 16px;
      padding: 16px 0;
      border-bottom: 1px solid var(--border);
    }

    .activity-item:last-child {
      border-bottom: none;
    }

    .activity-icon {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      flex-shrink: 0;
    }

    .activity-content {
      flex: 1;
    }

    .activity-text {
      font-size: 14px;
      color: var(--text-primary);
      margin-bottom: 4px;
    }

    .activity-text strong {
      font-weight: 600;
    }

    .activity-time {
      font-size: 12px;
      color: var(--text-muted);
    }

    /* Image Upload */
    .image-upload {
      border: 2px dashed var(--border);
      border-radius: var(--radius-lg);
      padding: 40px;
      text-align: center;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .image-upload:hover {
      border-color: var(--gold);
      background: var(--gold-muted);
    }

    .image-upload i {
      font-size: 48px;
      color: var(--text-muted);
      margin-bottom: 16px;
    }

    .image-upload p {
      color: var(--text-secondary);
      font-size: 14px;
    }

    .image-preview {
      width: 100%;
      height: 200px;
      border-radius: var(--radius-lg);
      object-fit: cover;
      margin-top: 16px;
    }

    /* Loading */
    .loading-spinner {
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 60px;
    }

    .spinner {
      width: 48px;
      height: 48px;
      border: 3px solid var(--border);
      border-top-color: var(--gold);
      border-radius: 50%;
      animation: spin 1s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .sidebar {
        transform: translateX(-100%);
      }
      
      .sidebar.open {
        transform: translateX(0);
      }
      
      .main {
        margin-left: 0;
      }
    }

    /* Utilities */
    .hidden { display: none !important; }
    .mt-4 { margin-top: 16px; }
    .mb-4 { margin-bottom: 16px; }
    .text-gold { color: var(--gold); }
    .text-success { color: var(--success); }
    .text-error { color: var(--error); }
    .text-muted { color: var(--text-muted); }
    .flex { display: flex; }
    .items-center { align-items: center; }
    .justify-between { justify-content: space-between; }
    .gap-2 { gap: 8px; }
    .gap-4 { gap: 16px; }
  </style>
</head>
<body>
  <div id="app"></div>
  
  <!-- Toast Container -->
  <div id="toast-container" class="toast-container"></div>

  <script>
    // ═══════════════════════════════════════════════════════════════════
    // MOTA ADMIN DASHBOARD - JavaScript
    // ═══════════════════════════════════════════════════════════════════

    // State
    const state = {
      isLoggedIn: false,
      user: null,
      token: null,
      currentPage: 'dashboard',
      data: {
        stats: {},
        users: [],
        restaurants: [],
        lodging: [],
        activities: [],
        events: [],
        nightlife: [],
        fleet: [],
        reservations: [],
        content: [],
        notifications: []
      },
      loading: true,
      modal: null,
      filters: {}
    };

    // API Configuration
    const API_BASE = window.location.hostname === 'localhost' 
      ? 'http://localhost:3001/api' 
      : '/api';

    // ═══════════════════════════════════════════════════════════════════
    // API FUNCTIONS
    // ═══════════════════════════════════════════════════════════════════

    async function apiCall(endpoint, method = 'GET', body = null) {
      const headers = { 'Content-Type': 'application/json' };
      if (state.token) headers['Authorization'] = `Bearer ${state.token}`;
      
      const options = { method, headers };
      if (body) options.body = JSON.stringify(body);
      
      try {
        const res = await fetch(`${API_BASE}${endpoint}`, options);
        const data = await res.json();
        if (!res.ok) throw new Error(data.error || 'Request failed');
        return data;
      } catch (err) {
        console.error('API Error:', err);
        throw err;
      }
    }

    async function loadAllData() {
      state.loading = true;
      render();
      
      try {
        const [users, restaurants, lodging, activities, events, content, reservations] = await Promise.all([
          apiCall('/users').catch(() => ({ users: [] })),
          apiCall('/restaurants').catch(() => ({ restaurants: [] })),
          apiCall('/lodging').catch(() => ({ lodging: [] })),
          apiCall('/activities').catch(() => ({ activities: [] })),
          apiCall('/events').catch(() => ({ events: [] })),
          apiCall('/content').catch(() => ({ content: [] })),
          apiCall('/reservations').catch(() => ({ reservations: [] }))
        ]);
        
        state.data.users = users.users || [];
        state.data.restaurants = restaurants.restaurants || [];
        state.data.lodging = lodging.lodging || [];
        state.data.activities = activities.activities || [];
        state.data.events = events.events || [];
        state.data.content = content.content || [];
        state.data.reservations = reservations.reservations || reservations || [];
        
        // Calculate stats
        state.data.stats = {
          totalUsers: state.data.users.length,
          totalInvestors: state.data.users.filter(u => u.accessLevel === 'investor').length,
          totalRestaurants: state.data.restaurants.length,
          totalLodging: state.data.lodging.length,
          totalActivities: state.data.activities.length,
          totalEvents: state.data.events.length,
          pendingReservations: state.data.reservations.filter(r => r.status === 'pending').length,
          totalRevenue: state.data.users.filter(u => u.investmentAmount).reduce((sum, u) => sum + (u.investmentAmount || 0), 0)
        };
      } catch (err) {
        console.error('Failed to load data:', err);
        showToast('Error', 'Failed to load data', 'error');
      }
      
      state.loading = false;
      render();
    }

    // ═══════════════════════════════════════════════════════════════════
    // AUTH FUNCTIONS
    // ═══════════════════════════════════════════════════════════════════

    async function login(email, password) {
      try {
        const data = await apiCall('/auth/login', 'POST', { email, password });
        state.token = data.token;
        state.user = data.user;
        state.isLoggedIn = true;
        localStorage.setItem('adminToken', data.token);
        localStorage.setItem('adminUser', JSON.stringify(data.user));
        await loadAllData();
        showToast('Welcome!', `Logged in as ${data.user.name}`, 'success');
      } catch (err) {
        showToast('Login Failed', err.message, 'error');
      }
    }

    function logout() {
      state.isLoggedIn = false;
      state.user = null;
      state.token = null;
      localStorage.removeItem('adminToken');
      localStorage.removeItem('adminUser');
      render();
    }

    function checkAuth() {
      const token = localStorage.getItem('adminToken');
      const user = localStorage.getItem('adminUser');
      if (token && user) {
        state.token = token;
        state.user = JSON.parse(user);
        state.isLoggedIn = true;
        loadAllData();
      } else {
        state.loading = false;
        render();
      }
    }

    // ═══════════════════════════════════════════════════════════════════
    // TOAST NOTIFICATIONS
    // ═══════════════════════════════════════════════════════════════════

    function showToast(title, message, type = 'info') {
      const container = document.getElementById('toast-container');
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      
      const icons = {
        success: 'fa-check',
        error: 'fa-times',
        warning: 'fa-exclamation',
        info: 'fa-info'
      };
      
      toast.innerHTML = `
        <div class="toast-icon"><i class="fas ${icons[type]}"></i></div>
        <div class="toast-content">
          <div class="toast-title">${title}</div>
          <div class="toast-message">${message}</div>
        </div>
      `;
      
      container.appendChild(toast);
      setTimeout(() => toast.remove(), 5000);
    }

    // ═══════════════════════════════════════════════════════════════════
    // MODAL FUNCTIONS
    // ═══════════════════════════════════════════════════════════════════

    function openModal(type, data = null) {
      state.modal = { type, data };
      render();
    }

    function closeModal() {
      state.modal = null;
      render();
    }

    // ═══════════════════════════════════════════════════════════════════
    // NAVIGATION
    // ═══════════════════════════════════════════════════════════════════

    function navigate(page) {
      state.currentPage = page;
      render();
    }

    // ═══════════════════════════════════════════════════════════════════
    // CRUD OPERATIONS
    // ═══════════════════════════════════════════════════════════════════

    async function createItem(type, data) {
      try {
        await apiCall(`/${type}`, 'POST', data);
        showToast('Success', `${type} created successfully`, 'success');
        closeModal();
        await loadAllData();
      } catch (err) {
        showToast('Error', err.message, 'error');
      }
    }

    async function updateItem(type, id, data) {
      try {
        await apiCall(`/${type}/${id}`, 'PUT', data);
        showToast('Success', `${type} updated successfully`, 'success');
        closeModal();
        await loadAllData();
      } catch (err) {
        showToast('Error', err.message, 'error');
      }
    }

    async function deleteItem(type, id, name) {
      if (!confirm(`Are you sure you want to delete "${name}"?`)) return;
      
      try {
        await apiCall(`/${type}/${id}`, 'DELETE');
        showToast('Deleted', `${name} has been deleted`, 'success');
        await loadAllData();
      } catch (err) {
        showToast('Error', err.message, 'error');
      }
    }

    // ═══════════════════════════════════════════════════════════════════
    // RENDER FUNCTIONS
    // ═══════════════════════════════════════════════════════════════════

    function render() {
      const app = document.getElementById('app');
      
      if (!state.isLoggedIn) {
        app.innerHTML = renderLoginPage();
      } else {
        app.innerHTML = renderApp();
      }
      
      attachEventListeners();
    }

    function renderLoginPage() {
      return `
        <div class="login-page">
          <div class="login-card">
            <div class="login-logo">
              <div class="login-logo-icon"><i class="fas fa-gem"></i></div>
              <h1 class="login-title">MOTA Admin</h1>
              <p class="login-subtitle">Content Management System</p>
            </div>
            
            <form id="login-form">
              <div class="form-group">
                <label class="form-label">Email Address</label>
                <input type="email" id="login-email" class="form-input" placeholder="admin@mota.com" value="admin@mota.com" required>
              </div>
              
              <div class="form-group">
                <label class="form-label">Password</label>
                <input type="password" id="login-password" class="form-input" placeholder="••••••••" value="admin123" required>
              </div>
              
              <button type="submit" class="btn btn-primary btn-lg" style="width: 100%; margin-top: 8px;">
                <i class="fas fa-sign-in-alt"></i> Sign In
              </button>
            </form>
            
            <div style="margin-top: 24px; padding-top: 24px; border-top: 1px solid var(--border);">
              <p style="font-size: 12px; color: var(--text-muted); text-align: center; margin-bottom: 12px;">Quick Login</p>
              <div style="display: flex; gap: 8px; flex-wrap: wrap; justify-content: center;">
                <button class="btn btn-secondary btn-sm quick-login" data-email="admin@mota.com" data-password="admin123">Admin</button>
                <button class="btn btn-secondary btn-sm quick-login" data-email="diamond@mota.com" data-password="diamond123">Diamond</button>
                <button class="btn btn-secondary btn-sm quick-login" data-email="demo@mota.com" data-password="demo123">Member</button>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderApp() {
      return `
        <div class="app">
          ${renderSidebar()}
          <main class="main">
            ${renderHeader()}
            <div class="content">
              ${state.loading ? renderLoading() : renderPage()}
            </div>
          </main>
        </div>
        ${state.modal ? renderModal() : ''}
      `;
    }

    function renderSidebar() {
      const navItems = [
        { section: 'Overview', items: [
          { id: 'dashboard', icon: 'fa-chart-line', label: 'Dashboard' }
        ]},
        { section: 'Content', items: [
          { id: 'slideshow', icon: 'fa-images', label: 'Slideshow' },
          { id: 'restaurants', icon: 'fa-utensils', label: 'Restaurants', count: state.data.restaurants.length },
          { id: 'lodging', icon: 'fa-hotel', label: 'Lodging', count: state.data.lodging.length },
          { id: 'activities', icon: 'fa-hiking', label: 'Activities', count: state.data.activities.length },
          { id: 'events', icon: 'fa-calendar-star', label: 'Events', count: state.data.events.length },
          { id: 'nightlife', icon: 'fa-moon', label: 'Nightlife' },
          { id: 'fleet', icon: 'fa-car', label: 'Exotic Fleet' }
        ]},
        { section: 'Users', items: [
          { id: 'users', icon: 'fa-users', label: 'All Users', count: state.data.users.length },
          { id: 'investors', icon: 'fa-gem', label: 'Investors', count: state.data.stats.totalInvestors }
        ]},
        { section: 'Operations', items: [
          { id: 'reservations', icon: 'fa-calendar-check', label: 'Reservations', badge: state.data.stats.pendingReservations },
          { id: 'notifications', icon: 'fa-bell', label: 'Notifications' }
        ]},
        { section: 'System', items: [
          { id: 'settings', icon: 'fa-cog', label: 'Settings' }
        ]}
      ];

      return `
        <aside class="sidebar">
          <div class="sidebar-header">
            <div class="sidebar-logo">
              <div class="logo-icon"><i class="fas fa-gem"></i></div>
              <div>
                <div class="logo-text">MOTA</div>
                <div class="logo-sub">Admin Dashboard</div>
              </div>
            </div>
          </div>
          
          <nav class="sidebar-nav">
            ${navItems.map(section => `
              <div class="nav-section">
                <div class="nav-section-title">${section.section}</div>
                ${section.items.map(item => `
                  <div class="nav-item ${state.currentPage === item.id ? 'active' : ''}" data-page="${item.id}">
                    <i class="fas ${item.icon}"></i>
                    <span>${item.label}</span>
                    ${item.badge ? `<span class="badge">${item.badge}</span>` : ''}
                    ${item.count !== undefined ? `<span style="margin-left:auto;color:var(--text-muted);font-size:12px;">${item.count}</span>` : ''}
                  </div>
                `).join('')}
              </div>
            `).join('')}
          </nav>
          
          <div class="sidebar-footer">
            <div class="user-info">
              <div class="user-avatar">${state.user?.name?.charAt(0) || 'A'}</div>
              <div class="user-details">
                <div class="user-name">${state.user?.name || 'Admin'}</div>
                <div class="user-role">${state.user?.accessLevel || 'Administrator'}</div>
              </div>
              <button class="btn btn-icon btn-secondary" onclick="logout()" title="Logout">
                <i class="fas fa-sign-out-alt"></i>
              </button>
            </div>
          </div>
        </aside>
      `;
    }

    function renderHeader() {
      const titles = {
        dashboard: 'Dashboard',
        slideshow: 'Homepage Slideshow',
        restaurants: 'Restaurants',
        lodging: 'Lodging',
        activities: 'Activities',
        events: 'Events',
        nightlife: 'Nightlife',
        fleet: 'Exotic Fleet',
        users: 'User Management',
        investors: 'Investors',
        reservations: 'Reservations',
        notifications: 'Notifications',
        settings: 'Settings'
      };

      return `
        <header class="header">
          <div class="header-left">
            <h1 class="page-title">${titles[state.currentPage] || 'Dashboard'}</h1>
          </div>
          <div class="header-right">
            <div class="search-box">
              <i class="fas fa-search"></i>
              <input type="text" placeholder="Search...">
            </div>
            <button class="header-btn">
              <i class="fas fa-bell"></i>
              ${state.data.stats.pendingReservations > 0 ? '<span class="notification-dot"></span>' : ''}
            </button>
            <button class="header-btn" onclick="loadAllData()">
              <i class="fas fa-sync-alt"></i>
            </button>
          </div>
        </header>
      `;
    }

    function renderLoading() {
      return `
        <div class="loading-spinner">
          <div class="spinner"></div>
        </div>
      `;
    }

    function renderPage() {
      const pages = {
        dashboard: renderDashboard,
        slideshow: renderSlideshow,
        restaurants: () => renderDataPage('restaurants', 'Restaurants', 'fa-utensils'),
        lodging: () => renderDataPage('lodging', 'Lodging', 'fa-hotel'),
        activities: () => renderDataPage('activities', 'Activities', 'fa-hiking'),
        events: () => renderDataPage('events', 'Events', 'fa-calendar-star'),
        users: renderUsers,
        investors: renderInvestors,
        reservations: renderReservations,
        settings: renderSettings
      };

      const renderer = pages[state.currentPage] || renderDashboard;
      return renderer();
    }

    function renderDashboard() {
      const stats = state.data.stats;
      
      return `
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon gold"><i class="fas fa-users"></i></div>
            <div class="stat-content">
              <div class="stat-label">Total Users</div>
              <div class="stat-value">${stats.totalUsers || 0}</div>
              <div class="stat-change up"><i class="fas fa-arrow-up"></i> 12% this month</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon info"><i class="fas fa-gem"></i></div>
            <div class="stat-content">
              <div class="stat-label">Investors</div>
              <div class="stat-value">${stats.totalInvestors || 0}</div>
              <div class="stat-change up"><i class="fas fa-arrow-up"></i> 3 new</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon success"><i class="fas fa-dollar-sign"></i></div>
            <div class="stat-content">
              <div class="stat-label">Total Investment</div>
              <div class="stat-value">$${formatNumber(stats.totalRevenue || 0)}</div>
            </div>
          </div>
          
          <div class="stat-card">
            <div class="stat-icon warning"><i class="fas fa-calendar-check"></i></div>
            <div class="stat-content">
              <div class="stat-label">Pending Reservations</div>
              <div class="stat-value">${stats.pendingReservations || 0}</div>
            </div>
          </div>
        </div>
        
        <div class="quick-actions">
          <div class="quick-action" onclick="navigate('restaurants'); openModal('add-restaurant')">
            <div class="quick-action-icon"><i class="fas fa-plus"></i></div>
            <div class="quick-action-text">Add Restaurant</div>
          </div>
          <div class="quick-action" onclick="navigate('lodging'); openModal('add-lodging')">
            <div class="quick-action-icon"><i class="fas fa-plus"></i></div>
            <div class="quick-action-text">Add Lodging</div>
          </div>
          <div class="quick-action" onclick="navigate('events'); openModal('add-event')">
            <div class="quick-action-icon"><i class="fas fa-plus"></i></div>
            <div class="quick-action-text">Add Event</div>
          </div>
          <div class="quick-action" onclick="navigate('notifications'); openModal('add-notification')">
            <div class="quick-action-icon"><i class="fas fa-bell"></i></div>
            <div class="quick-action-text">Send Notification</div>
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: 2fr 1fr; gap: 24px;">
          <div class="card">
            <div class="card-header">
              <div class="card-title"><i class="fas fa-clock"></i> Recent Activity</div>
            </div>
            <div class="card-body">
              <div class="activity-list">
                ${renderRecentActivity()}
              </div>
            </div>
          </div>
          
          <div class="card">
            <div class="card-header">
              <div class="card-title"><i class="fas fa-chart-pie"></i> Content Overview</div>
            </div>
            <div class="card-body">
              <div style="display: flex; flex-direction: column; gap: 16px;">
                ${renderContentStats()}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderRecentActivity() {
      const activities = [
        { icon: 'fa-user-plus', color: 'var(--success-bg)', iconColor: 'var(--success)', text: '<strong>New user</strong> registered', time: '5 minutes ago' },
        { icon: 'fa-calendar-check', color: 'var(--info-bg)', iconColor: 'var(--info)', text: 'Reservation <strong>#RES-1234</strong> confirmed', time: '15 minutes ago' },
        { icon: 'fa-star', color: 'var(--warning-bg)', iconColor: 'var(--warning)', text: '<strong>Azure</strong> received a 5-star review', time: '1 hour ago' },
        { icon: 'fa-gem', color: 'var(--gold-muted)', iconColor: 'var(--gold)', text: 'New <strong>Gold investor</strong> joined', time: '2 hours ago' },
        { icon: 'fa-edit', color: 'var(--info-bg)', iconColor: 'var(--info)', text: '<strong>Beach Villa</strong> listing updated', time: '3 hours ago' }
      ];

      return activities.map(a => `
        <div class="activity-item">
          <div class="activity-icon" style="background: ${a.color}; color: ${a.iconColor};">
            <i class="fas ${a.icon}"></i>
          </div>
          <div class="activity-content">
            <div class="activity-text">${a.text}</div>
            <div class="activity-time">${a.time}</div>
          </div>
        </div>
      `).join('');
    }

    function renderContentStats() {
      const items = [
        { label: 'Restaurants', count: state.data.restaurants.length, icon: 'fa-utensils', color: 'var(--success)' },
        { label: 'Lodging', count: state.data.lodging.length, icon: 'fa-hotel', color: 'var(--info)' },
        { label: 'Activities', count: state.data.activities.length, icon: 'fa-hiking', color: 'var(--warning)' },
        { label: 'Events', count: state.data.events.length, icon: 'fa-calendar', color: 'var(--error)' }
      ];

      return items.map(item => `
        <div style="display: flex; align-items: center; justify-content: space-between;">
          <div style="display: flex; align-items: center; gap: 12px;">
            <div style="width: 36px; height: 36px; border-radius: 8px; background: ${item.color}20; color: ${item.color}; display: flex; align-items: center; justify-content: center;">
              <i class="fas ${item.icon}"></i>
            </div>
            <span>${item.label}</span>
          </div>
          <strong>${item.count}</strong>
        </div>
      `).join('');
    }

    function renderDataPage(type, title, icon) {
      const data = state.data[type] || [];
      
      return `
        <div class="page-header">
          <div class="page-header-left">
            <h1><i class="fas ${icon}" style="color: var(--gold); margin-right: 12px;"></i>${title}</h1>
            <p>Manage all ${title.toLowerCase()} in the system</p>
          </div>
          <button class="btn btn-primary" onclick="openModal('add-${type.slice(0, -1)}')">
            <i class="fas fa-plus"></i> Add ${title.slice(0, -1)}
          </button>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">${data.length} ${title}</div>
            <div class="filters">
              <button class="filter-btn active">All</button>
              <button class="filter-btn">Featured</button>
              <button class="filter-btn">Active</button>
            </div>
          </div>
          <div class="card-body" style="padding: 0;">
            ${data.length ? renderDataTable(type, data) : renderEmptyState(title)}
          </div>
        </div>
      `;
    }

    function renderDataTable(type, data) {
      const columns = getColumnsForType(type);
      
      return `
        <div class="table-container">
          <table>
            <thead>
              <tr>
                ${columns.map(col => `<th>${col.label}</th>`).join('')}
                <th>Actions</th>
              </tr>
            </thead>
            <tbody>
              ${data.map(item => `
                <tr>
                  ${columns.map(col => `<td>${renderCell(item, col)}</td>`).join('')}
                  <td>
                    <div class="table-actions">
                      <button class="btn btn-secondary btn-icon" onclick="openModal('edit-${type.slice(0, -1)}', ${JSON.stringify(item).replace(/"/g, '&quot;')})" title="Edit">
                        <i class="fas fa-edit"></i>
                      </button>
                      <button class="btn btn-danger btn-icon" onclick="deleteItem('${type}', '${item._id}', '${item.name}')" title="Delete">
                        <i class="fas fa-trash"></i>
                      </button>
                    </div>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        </div>
      `;
    }

    function getColumnsForType(type) {
      const columns = {
        restaurants: [
          { key: 'image', label: 'Image', type: 'image' },
          { key: 'name', label: 'Name' },
          { key: 'cuisine', label: 'Cuisine' },
          { key: 'priceRange', label: 'Price' },
          { key: 'rating', label: 'Rating', type: 'rating' },
          { key: 'isAvailable', label: 'Status', type: 'status' }
        ],
        lodging: [
          { key: 'image', label: 'Image', type: 'image' },
          { key: 'name', label: 'Name' },
          { key: 'type', label: 'Type' },
          { key: 'price', label: 'Price', type: 'currency' },
          { key: 'rating', label: 'Rating', type: 'rating' },
          { key: 'isAvailable', label: 'Status', type: 'status' }
        ],
        activities: [
          { key: 'image', label: 'Image', type: 'image' },
          { key: 'name', label: 'Name' },
          { key: 'category', label: 'Category' },
          { key: 'price', label: 'Price', type: 'currency' },
          { key: 'duration', label: 'Duration' },
          { key: 'isAvailable', label: 'Status', type: 'status' }
        ],
        events: [
          { key: 'image', label: 'Image', type: 'image' },
          { key: 'name', label: 'Name' },
          { key: 'category', label: 'Category' },
          { key: 'date', label: 'Date', type: 'date' },
          { key: 'venue', label: 'Venue' },
          { key: 'status', label: 'Status', type: 'badge' }
        ]
      };
      return columns[type] || [];
    }

    function renderCell(item, col) {
      const value = item[col.key];
      
      switch (col.type) {
        case 'image':
          const imgUrl = item.images?.[0]?.url || 'https://via.placeholder.com/48';
          return `<img src="${imgUrl}" class="table-img" onerror="this.src='https://via.placeholder.com/48'">`;
        case 'rating':
          return `<span class="data-card-rating"><i class="fas fa-star"></i> ${value || 0}</span>`;
        case 'currency':
          return `<span style="color: var(--gold); font-weight: 600;">$${value || 0}</span>`;
        case 'status':
          return value ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-error">Inactive</span>';
        case 'badge':
          return `<span class="badge badge-info">${value || 'N/A'}</span>`;
        case 'date':
          return value ? new Date(value).toLocaleDateString() : 'N/A';
        default:
          return value || '-';
      }
    }

    function renderEmptyState(title) {
      return `
        <div class="empty-state">
          <i class="fas fa-inbox"></i>
          <h3>No ${title} Found</h3>
          <p>Get started by adding your first ${title.toLowerCase().slice(0, -1)}.</p>
          <button class="btn btn-primary" onclick="openModal('add-${title.toLowerCase().slice(0, -1)}')">
            <i class="fas fa-plus"></i> Add ${title.slice(0, -1)}
          </button>
        </div>
      `;
    }

    function renderUsers() {
      const users = state.data.users || [];
      
      return `
        <div class="page-header">
          <div class="page-header-left">
            <h1><i class="fas fa-users" style="color: var(--gold); margin-right: 12px;"></i>User Management</h1>
            <p>Manage all users in the system</p>
          </div>
          <button class="btn btn-primary" onclick="openModal('add-user')">
            <i class="fas fa-user-plus"></i> Add User
          </button>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">${users.length} Users</div>
            <div class="filters">
              <button class="filter-btn active">All</button>
              <button class="filter-btn">Members</button>
              <button class="filter-btn">Investors</button>
              <button class="filter-btn">Guests</button>
            </div>
          </div>
          <div class="card-body" style="padding: 0;">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>User</th>
                    <th>Email</th>
                    <th>Access Level</th>
                    <th>Tier</th>
                    <th>Member Since</th>
                    <th>Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  ${users.map(user => `
                    <tr>
                      <td>
                        <div style="display: flex; align-items: center; gap: 12px;">
                          <div class="user-avatar" style="width: 36px; height: 36px; font-size: 14px;">${user.name?.charAt(0) || '?'}</div>
                          <strong>${user.name || 'Unknown'}</strong>
                        </div>
                      </td>
                      <td>${user.email}</td>
                      <td><span class="badge badge-info">${user.accessLevel}</span></td>
                      <td>${renderTierBadge(user.investorTier)}</td>
                      <td>${user.memberSince ? new Date(user.memberSince).toLocaleDateString() : '-'}</td>
                      <td>${user.isActive ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-error">Inactive</span>'}</td>
                      <td>
                        <div class="table-actions">
                          <button class="btn btn-secondary btn-icon" onclick="openModal('edit-user', ${JSON.stringify(user).replace(/"/g, '&quot;')})" title="Edit">
                            <i class="fas fa-edit"></i>
                          </button>
                          <button class="btn btn-secondary btn-icon" onclick="openModal('view-user', ${JSON.stringify(user).replace(/"/g, '&quot;')})" title="View">
                            <i class="fas fa-eye"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      `;
    }

    function renderTierBadge(tier) {
      if (!tier) return '<span class="text-muted">-</span>';
      const colors = {
        gold: 'var(--tier-gold)',
        platinum: 'var(--tier-platinum)',
        diamond: 'var(--tier-diamond)'
      };
      return `<span class="badge" style="background: ${colors[tier]}20; color: ${colors[tier]};">${tier.toUpperCase()}</span>`;
    }

    function renderInvestors() {
      const investors = state.data.users.filter(u => u.accessLevel === 'investor') || [];
      
      return `
        <div class="page-header">
          <div class="page-header-left">
            <h1><i class="fas fa-gem" style="color: var(--gold); margin-right: 12px;"></i>Investors</h1>
            <p>Manage investor accounts and portfolios</p>
          </div>
        </div>
        
        <div class="stats-grid">
          <div class="stat-card">
            <div class="stat-icon" style="background: var(--tier-gold)20; color: var(--tier-gold);"><i class="fas fa-trophy"></i></div>
            <div class="stat-content">
              <div class="stat-label">Gold Investors</div>
              <div class="stat-value">${investors.filter(i => i.investorTier === 'gold').length}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: var(--tier-platinum)20; color: #888;"><i class="fas fa-medal"></i></div>
            <div class="stat-content">
              <div class="stat-label">Platinum Investors</div>
              <div class="stat-value">${investors.filter(i => i.investorTier === 'platinum').length}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon" style="background: var(--tier-diamond)20; color: var(--tier-diamond);"><i class="fas fa-gem"></i></div>
            <div class="stat-content">
              <div class="stat-label">Diamond Investors</div>
              <div class="stat-value">${investors.filter(i => i.investorTier === 'diamond').length}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon success"><i class="fas fa-dollar-sign"></i></div>
            <div class="stat-content">
              <div class="stat-label">Total Investment</div>
              <div class="stat-value">$${formatNumber(investors.reduce((sum, i) => sum + (i.investmentAmount || 0), 0))}</div>
            </div>
          </div>
        </div>
        
        <div class="card">
          <div class="card-body" style="padding: 0;">
            <div class="table-container">
              <table>
                <thead>
                  <tr>
                    <th>Investor</th>
                    <th>Tier</th>
                    <th>Investment</th>
                    <th>Portfolio Value</th>
                    <th>KYC Status</th>
                    <th>Actions</th>
                  </tr>
                </thead>
                <tbody>
                  ${investors.map(inv => `
                    <tr>
                      <td>
                        <div style="display: flex; align-items: center; gap: 12px;">
                          <div class="user-avatar" style="width: 36px; height: 36px; font-size: 14px;">${inv.name?.charAt(0) || '?'}</div>
                          <div>
                            <strong>${inv.name}</strong>
                            <div style="font-size: 12px; color: var(--text-muted);">${inv.email}</div>
                          </div>
                        </div>
                      </td>
                      <td>${renderTierBadge(inv.investorTier)}</td>
                      <td style="color: var(--gold); font-weight: 600;">$${formatNumber(inv.investmentAmount || 0)}</td>
                      <td style="color: var(--success); font-weight: 600;">$${formatNumber(inv.portfolioValue || 0)}</td>
                      <td>${inv.investorProfile?.kycCompleted ? '<span class="badge badge-success">Verified</span>' : '<span class="badge badge-warning">Pending</span>'}</td>
                      <td>
                        <button class="btn btn-secondary btn-sm" onclick="openModal('view-investor', ${JSON.stringify(inv).replace(/"/g, '&quot;')})">
                          <i class="fas fa-eye"></i> View
                        </button>
                      </td>
                    </tr>
                  `).join('')}
                </tbody>
              </table>
            </div>
          </div>
        </div>
      `;
    }

    function renderReservations() {
      const reservations = state.data.reservations || [];
      
      return `
        <div class="page-header">
          <div class="page-header-left">
            <h1><i class="fas fa-calendar-check" style="color: var(--gold); margin-right: 12px;"></i>Reservations</h1>
            <p>Manage all bookings and reservations</p>
          </div>
        </div>
        
        <div class="tabs">
          <div class="tab active">All</div>
          <div class="tab">Pending (${reservations.filter(r => r.status === 'pending').length})</div>
          <div class="tab">Confirmed</div>
          <div class="tab">Completed</div>
          <div class="tab">Cancelled</div>
        </div>
        
        <div class="card">
          <div class="card-body" style="padding: 0;">
            ${reservations.length ? `
              <div class="table-container">
                <table>
                  <thead>
                    <tr>
                      <th>Confirmation #</th>
                      <th>Guest</th>
                      <th>Type</th>
                      <th>Item</th>
                      <th>Date</th>
                      <th>Status</th>
                      <th>Actions</th>
                    </tr>
                  </thead>
                  <tbody>
                    ${reservations.map(res => `
                      <tr>
                        <td><code style="color: var(--gold);">${res.confirmationNumber || 'N/A'}</code></td>
                        <td>${res.bookingDetails?.name || 'Unknown'}</td>
                        <td><span class="badge badge-info">${res.itemType}</span></td>
                        <td>${res.itemName || 'N/A'}</td>
                        <td>${res.date ? new Date(res.date).toLocaleDateString() : 'N/A'}</td>
                        <td>${renderStatusBadge(res.status)}</td>
                        <td>
                          <div class="table-actions">
                            <button class="btn btn-secondary btn-icon" title="View">
                              <i class="fas fa-eye"></i>
                            </button>
                            ${res.status === 'pending' ? `
                              <button class="btn btn-success btn-icon" title="Confirm">
                                <i class="fas fa-check"></i>
                              </button>
                            ` : ''}
                          </div>
                        </td>
                      </tr>
                    `).join('')}
                  </tbody>
                </table>
              </div>
            ` : renderEmptyState('Reservations')}
          </div>
        </div>
      `;
    }

    function renderStatusBadge(status) {
      const badges = {
        pending: 'badge-warning',
        confirmed: 'badge-success',
        completed: 'badge-info',
        cancelled: 'badge-error'
      };
      return `<span class="badge ${badges[status] || 'badge-info'}">${status}</span>`;
    }

    function renderSlideshow() {
      const slideshow = state.data.content.find(c => c.key === 'homepage_slideshow');
      const slides = slideshow?.slides || [];
      
      return `
        <div class="page-header">
          <div class="page-header-left">
            <h1><i class="fas fa-images" style="color: var(--gold); margin-right: 12px;"></i>Homepage Slideshow</h1>
            <p>Manage the hero slideshow on the app homepage</p>
          </div>
          <button class="btn btn-primary" onclick="openModal('add-slide')">
            <i class="fas fa-plus"></i> Add Slide
          </button>
        </div>
        
        <div class="data-grid">
          ${slides.map((slide, i) => `
            <div class="data-card">
              <img src="${slide.imageUrl}" class="data-card-img" onerror="this.src='https://via.placeholder.com/300x160'">
              <div class="data-card-body">
                <div class="data-card-title">${slide.title}</div>
                <div class="data-card-subtitle">${slide.subtitle || ''}</div>
                <div style="display: flex; gap: 8px; margin-top: 8px;">
                  ${slide.linkType !== 'none' ? `<span class="badge badge-gold">${slide.linkType}: ${slide.linkTarget || 'Tab ' + slide.linkTab}</span>` : '<span class="badge">No Link</span>'}
                  ${slide.isActive ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-error">Hidden</span>'}
                </div>
              </div>
              <div class="data-card-footer">
                <button class="btn btn-secondary btn-sm"><i class="fas fa-edit"></i> Edit</button>
                <button class="btn btn-danger btn-sm"><i class="fas fa-trash"></i></button>
              </div>
            </div>
          `).join('')}
        </div>
      `;
    }

    function renderSettings() {
      return `
        <div class="page-header">
          <div class="page-header-left">
            <h1><i class="fas fa-cog" style="color: var(--gold); margin-right: 12px;"></i>Settings</h1>
            <p>Configure system settings</p>
          </div>
        </div>
        
        <div class="card">
          <div class="card-header">
            <div class="card-title">App Configuration</div>
          </div>
          <div class="card-body">
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">App Name</label>
                <input type="text" class="form-input" value="MOTA Resort & Casino">
              </div>
              <div class="form-group">
                <label class="form-label">Support Email</label>
                <input type="email" class="form-input" value="support@motaresort.com">
              </div>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Currency</label>
                <select class="form-select">
                  <option>USD - US Dollar</option>
                  <option>BZD - Belize Dollar</option>
                </select>
              </div>
              <div class="form-group">
                <label class="form-label">Timezone</label>
                <select class="form-select">
                  <option>America/Belize</option>
                  <option>America/New_York</option>
                </select>
              </div>
            </div>
          </div>
          <div class="card-footer">
            <button class="btn btn-primary"><i class="fas fa-save"></i> Save Changes</button>
          </div>
        </div>
      `;
    }

    function renderModal() {
      if (!state.modal) return '';
      
      const { type, data } = state.modal;
      
      return `
        <div class="modal-overlay active" onclick="if(event.target === this) closeModal()">
          <div class="modal">
            <div class="modal-header">
              <h3 class="modal-title">${getModalTitle(type)}</h3>
              <button class="modal-close" onclick="closeModal()"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
              ${renderModalContent(type, data)}
            </div>
          </div>
        </div>
      `;
    }

    function getModalTitle(type) {
      const titles = {
        'add-restaurant': 'Add Restaurant',
        'edit-restaurant': 'Edit Restaurant',
        'add-lodging': 'Add Lodging',
        'edit-lodging': 'Edit Lodging',
        'add-activity': 'Add Activity',
        'edit-activity': 'Edit Activity',
        'add-event': 'Add Event',
        'edit-event': 'Edit Event',
        'add-slide': 'Add Slide',
        'add-user': 'Add User',
        'edit-user': 'Edit User',
        'view-user': 'User Details',
        'view-investor': 'Investor Details',
        'add-notification': 'Send Notification'
      };
      return titles[type] || 'Modal';
    }

    function renderModalContent(type, data) {
      if (type.startsWith('add-') || type.startsWith('edit-')) {
        const entityType = type.replace('add-', '').replace('edit-', '');
        return renderEntityForm(entityType, data);
      }
      
      if (type === 'view-user' || type === 'view-investor') {
        return renderUserDetail(data);
      }
      
      if (type === 'add-notification') {
        return renderNotificationForm();
      }
      
      return '<p>Unknown modal type</p>';
    }

    function renderEntityForm(entityType, data) {
      const isEdit = !!data;
      
      const forms = {
        restaurant: `
          <form id="entity-form">
            <div class="form-group">
              <label class="form-label">Name *</label>
              <input type="text" name="name" class="form-input" value="${data?.name || ''}" required>
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Cuisine *</label>
                <input type="text" name="cuisine" class="form-input" value="${data?.cuisine || ''}" required>
              </div>
              <div class="form-group">
                <label class="form-label">Price Range *</label>
                <select name="priceRange" class="form-select" required>
                  <option value="$" ${data?.priceRange === '$' ? 'selected' : ''}>$ - Budget</option>
                  <option value="$$" ${data?.priceRange === '$$' ? 'selected' : ''}>$$ - Moderate</option>
                  <option value="$$$" ${data?.priceRange === '$$$' ? 'selected' : ''}>$$$ - Upscale</option>
                  <option value="$$$$" ${data?.priceRange === '$$$$' ? 'selected' : ''}>$$$$ - Fine Dining</option>
                </select>
              </div>
            </div>
            <div class="form-group">
              <label class="form-label">Description *</label>
              <textarea name="description" class="form-textarea" required>${data?.description || ''}</textarea>
            </div>
            <div class="form-group">
              <label class="form-label">Image URL</label>
              <input type="url" name="imageUrl" class="form-input" value="${data?.images?.[0]?.url || ''}">
            </div>
            <div class="form-row">
              <div class="form-group">
                <label class="form-label">Rating</label>
                <input type="number" name="rating" class="form-input" min="0" max="5" step="0.1" value="${data?.rating || 4.5}">
              </div>
              <div class="form-group">
                <label class="form-label">Dress Code</label>
                <select name="dressCode" class="form-select">
                  <option value="casual" ${data?.dressCode === 'casual' ? 'selected' : ''}>Casual</option>
                  <option value="smart casual" ${data?.dressCode === 'smart casual' ? 'selected' : ''}>Smart Casual</option>
                  <option value="business casual" ${data?.dressCode === 'business casual' ? 'selected' : ''}>Business Casual</option>
                  <option value="formal" ${data?.dressCode === 'formal' ? 'selected' : ''}>Formal</option>
                </select>
              </div>
            </div>
            <div style="display: flex; align-items: center; gap: 16px; margin-top: 8px;">
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <div class="toggle ${data?.isAvailable !== false ? 'active' : ''}" data-field="isAvailable" onclick="this.classList.toggle('active')"></div>
                <span>Available</span>
              </label>
              <label style="display: flex; align-items: center; gap: 8px; cursor: pointer;">
                <div class="toggle ${data?.isFeatured ? 'active' : ''}" data-field="isFeatured" onclick="this.classList.toggle('active')"></div>
                <span>Featured</span>
              </label>
            </div>
            <div class="modal-footer" style="margin: 24px -24px -24px; padding: 16px 24px;">
              <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
              <button type="submit" class="btn btn-primary">${isEdit ? 'Update' : 'Create'} Restaurant</button>
            </div>
          </form>
        `,
        // Similar forms for other entity types...
      };
      
      return forms[entityType] || `<p>Form for ${entityType}</p>`;
    }

    function renderUserDetail(user) {
      return `
        <div style="text-align: center; margin-bottom: 24px;">
          <div class="user-avatar" style="width: 80px; height: 80px; font-size: 32px; margin: 0 auto 16px;">${user.name?.charAt(0)}</div>
          <h2 style="margin-bottom: 4px;">${user.name}</h2>
          <p style="color: var(--text-muted);">${user.email}</p>
          <div style="margin-top: 12px;">
            ${renderTierBadge(user.investorTier)}
            <span class="badge badge-info">${user.accessLevel}</span>
          </div>
        </div>
        
        <div style="display: grid; grid-template-columns: repeat(2, 1fr); gap: 16px;">
          <div style="background: var(--bg-tertiary); padding: 16px; border-radius: var(--radius-md);">
            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Investment</div>
            <div style="font-size: 20px; font-weight: 700; color: var(--gold);">$${formatNumber(user.investmentAmount || 0)}</div>
          </div>
          <div style="background: var(--bg-tertiary); padding: 16px; border-radius: var(--radius-md);">
            <div style="font-size: 12px; color: var(--text-muted); margin-bottom: 4px;">Portfolio Value</div>
            <div style="font-size: 20px; font-weight: 700; color: var(--success);">$${formatNumber(user.portfolioValue || 0)}</div>
          </div>
        </div>
        
        <div style="margin-top: 24px;">
          <h4 style="margin-bottom: 12px;">Details</h4>
          <div style="display: flex; flex-direction: column; gap: 12px;">
            <div style="display: flex; justify-content: space-between;">
              <span style="color: var(--text-muted);">Phone</span>
              <span>${user.phone || 'Not provided'}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: var(--text-muted);">Member Since</span>
              <span>${user.memberSince ? new Date(user.memberSince).toLocaleDateString() : 'N/A'}</span>
            </div>
            <div style="display: flex; justify-content: space-between;">
              <span style="color: var(--text-muted);">Status</span>
              <span>${user.isActive ? '<span class="badge badge-success">Active</span>' : '<span class="badge badge-error">Inactive</span>'}</span>
            </div>
          </div>
        </div>
        
        <div class="modal-footer" style="margin: 24px -24px -24px; padding: 16px 24px;">
          <button class="btn btn-secondary" onclick="closeModal()">Close</button>
          <button class="btn btn-primary" onclick="openModal('edit-user', ${JSON.stringify(user).replace(/"/g, '&quot;')})">
            <i class="fas fa-edit"></i> Edit User
          </button>
        </div>
      `;
    }

    function renderNotificationForm() {
      return `
        <form id="notification-form">
          <div class="form-group">
            <label class="form-label">Target Audience</label>
            <select name="targetType" class="form-select">
              <option value="all">All Users</option>
              <option value="members">Members Only</option>
              <option value="investors">Investors Only</option>
              <option value="gold">Gold Investors</option>
              <option value="platinum">Platinum Investors</option>
              <option value="diamond">Diamond Investors</option>
            </select>
          </div>
          <div class="form-group">
            <label class="form-label">Title *</label>
            <input type="text" name="title" class="form-input" placeholder="Notification title" required>
          </div>
          <div class="form-group">
            <label class="form-label">Message *</label>
            <textarea name="message" class="form-textarea" placeholder="Notification message" required></textarea>
          </div>
          <div class="form-group">
            <label class="form-label">Type</label>
            <select name="type" class="form-select">
              <option value="info">Info</option>
              <option value="success">Success</option>
              <option value="warning">Warning</option>
              <option value="promo">Promotional</option>
              <option value="event">Event</option>
            </select>
          </div>
          <div class="modal-footer" style="margin: 24px -24px -24px; padding: 16px 24px;">
            <button type="button" class="btn btn-secondary" onclick="closeModal()">Cancel</button>
            <button type="submit" class="btn btn-primary"><i class="fas fa-paper-plane"></i> Send Notification</button>
          </div>
        </form>
      `;
    }

    // ═══════════════════════════════════════════════════════════════════
    // UTILITIES
    // ═══════════════════════════════════════════════════════════════════

    function formatNumber(num) {
      if (num >= 1000000) return (num / 1000000).toFixed(1) + 'M';
      if (num >= 1000) return (num / 1000).toFixed(0) + 'K';
      return num.toString();
    }

    function attachEventListeners() {
      // Navigation
      document.querySelectorAll('.nav-item[data-page]').forEach(item => {
        item.addEventListener('click', () => navigate(item.dataset.page));
      });

      // Login form
      const loginForm = document.getElementById('login-form');
      if (loginForm) {
        loginForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          const email = document.getElementById('login-email').value;
          const password = document.getElementById('login-password').value;
          await login(email, password);
        });
      }

      // Quick login buttons
      document.querySelectorAll('.quick-login').forEach(btn => {
        btn.addEventListener('click', () => {
          document.getElementById('login-email').value = btn.dataset.email;
          document.getElementById('login-password').value = btn.dataset.password;
        });
      });

      // Entity forms
      const entityForm = document.getElementById('entity-form');
      if (entityForm) {
        entityForm.addEventListener('submit', async (e) => {
          e.preventDefault();
          const formData = new FormData(entityForm);
          const data = Object.fromEntries(formData);
          
          // Handle toggles
          entityForm.querySelectorAll('.toggle').forEach(t => {
            data[t.dataset.field] = t.classList.contains('active');
          });
          
          // Handle image
          if (data.imageUrl) {
            data.images = [{ url: data.imageUrl, isPrimary: true }];
            delete data.imageUrl;
          }
          
          const type = state.modal.type;
          const entityType = type.replace('add-', '').replace('edit-', '') + 's';
          
          if (type.startsWith('edit-')) {
            await updateItem(entityType, state.modal.data._id, data);
          } else {
            await createItem(entityType, data);
          }
        });
      }
    }

    // ═══════════════════════════════════════════════════════════════════
    // INITIALIZE
    // ═══════════════════════════════════════════════════════════════════

    document.addEventListener('DOMContentLoaded', () => {
      checkAuth();
    });
  </script>
</body>
</html>
